import{Q as f,d as m}from"./q-nQEjtDOf.js";import{l as d,d as u,r as p,Z as w}from"./q-Y6E2TeAI.js";import"./q-izE8gtqG.js";const E=async function(...n){const[s]=d(),o=n.length>0&&n[0]instanceof AbortSignal?n.shift():void 0;{const i=u(),l=n.map(t=>t instanceof SubmitEvent&&t.target instanceof HTMLFormElement?new FormData(t.target):t instanceof Event||t instanceof Node?null:t),a=s.getHash(),e=await fetch(`?${f}=${a}`,{method:"POST",headers:{"Content-Type":"application/qwik-json","X-QRL":a},signal:o,body:await p([s,...l])}),r=e.headers.get("Content-Type");if(e.ok&&r==="text/qwik-json-stream"&&e.body)return async function*(){try{for await(const t of m(e.body,i??document.documentElement,o))yield t}finally{o?.aborted||await e.body.cancel()}}();if(r==="application/qwik-json"){const t=await e.text(),c=await w(t,i??document.documentElement);if(e.status===500)throw c;return c}}};export{E as s_wOIPfiQ04l4};
